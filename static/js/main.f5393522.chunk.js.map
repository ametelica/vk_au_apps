{"version":3,"sources":["panels/Home.js","panels/Info.js","App.js","index.js"],"names":["Home","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","money","cab_id","activeTab","getItems","bind","assertThisInitialized","_this2","api","t","signParams","fetchJsonp","then","res","json","data","setState","catch","e","console","log","window","location","_this3","react_default","a","createElement","vkui","id","fetchedUser","title","before","photo_200","src","description","city","concat","first_name","last_name","map","index","onClick","selected","n","i","length","item","index2","c","icon","m","key","alt","style","width","height","margin","indicator","multiline","React","Component","osname","platform","Info","left","go","data-to","IOS","chevron_back_default","back_default","App","activePanel","currentTarget","dataset","to","items","achievements","popout","activeStory","onStoryChange","sign_params","href","split","forEach","substr","push","join","story","type","fetch","results","newState","alert","connect","subscribe","detail","authToken","access_token","send","tabbar","data-story","text","user_default","market_default","messages_default","favorite_default","more_default","panels_Home","appState","panels_Info","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.f5393522.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Panel, PanelHeader, Group, Div, Button, List, Avatar, ListItem, Tabs, TabsItem, FixedLayout, HorizontalScroll, InfoRow, Cell} from '@vkontakte/vkui';\r\nimport fetchJsonp from 'fetch-jsonp';\r\n\r\nimport './../common.css';\r\n\r\n\r\nclass Home extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state={\r\n            money: [],\r\n            cab_id: 0,\r\n            activeTab: 0\r\n        }\r\n\r\n        this.getItems = this.getItems.bind(this)\r\n\r\n    }\r\n\r\n    getItems() {\r\n        let api = `https://activeusers.ru/miniapi.php?mode=user&` + this.props.t.signParams();\r\n        fetchJsonp(api)\r\n            .then(res => res.json())\r\n            .then(data => this.setState({ money : data.data.money, cab_id: data.data.cab_id}))\r\n            .catch(e => [])\r\n    }\r\n\r\n    componentDidMount () {\r\n        this.getItems();\r\n        console.log(window.location);\r\n    }\r\n\r\n    render() {\r\n        let props = this.props;\r\n        return (\r\n        <Panel id={props.id}>\r\n            <PanelHeader>ActiveUsers</PanelHeader>\r\n\r\n            {props.fetchedUser &&\r\n            <Group title=\"\">\r\n                <ListItem\r\n                    before={props.fetchedUser.photo_200 ? <Avatar src={props.fetchedUser.photo_200}/> : null}\r\n                    description={props.fetchedUser.city && props.fetchedUser.city.title ? props.fetchedUser.city.title : ''}\r\n                    >\r\n                    {`${props.fetchedUser.first_name} ${props.fetchedUser.last_name}`}\r\n                </ListItem>\r\n            </Group>}\r\n\r\n            <Tabs>\r\n                {this.state.money.map((e, index) => (\r\n                <TabsItem\r\n                    onClick={() => this.setState({activeTab : index})}\r\n                    selected={this.state.activeTab === index}\r\n                >\r\n                    {e.n}\r\n                </TabsItem>\r\n                ))\r\n                }\r\n            </Tabs>\r\n\r\n            {this.state.money.map((e, index) => {\r\n                if(this.state.activeTab != index) return false;\r\n                return (\r\n            <List>\r\n                {\r\n                    e.i.length > 0 && e.i.map((item, index2) => {\r\n                        if (item.c == 0) return false;\r\n                        let icon = 'https://activeusers.ru/upload/cab/' + this.state.cab_id + '/' + item.m;\r\n                        return (\r\n                            <Cell key={index2}\r\n                                  before={\r\n                                    <img\r\n                                        alt=\"\"\r\n                                        style={{\r\n                                            width: 40,\r\n                                            height : 40,\r\n                                            margin : 10\r\n                                        }}\r\n                                        src={icon}\r\n                                        />\r\n                                    }\r\n                                  indicator={item.c}\r\n                                  multiline>\r\n                                {item.t}\r\n                            </Cell>\r\n                        )\r\n                    })\r\n                }\r\n            </List>\r\n            )})}\r\n        </Panel>\r\n        );\r\n    }\r\n}\r\nexport default Home;","import React from 'react';\r\nimport { Panel, PanelHeader, HeaderButton, platform, IOS, Div } from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\n\r\nconst osname = platform();\r\n\r\nconst Info = props => (\r\n    <Panel id={props.id}>\r\n        <PanelHeader left={<HeaderButton onClick={props.go} data-to=\"home\">\r\n    \t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t\t</HeaderButton>}\r\n\t\t\t>\r\n\t\t\tТут заголовок 2\r\n\t\t</PanelHeader>\r\n        <Div>Тут тело 2</Div>\r\n    </Panel>\r\n);\r\n\r\nexport default Info;","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\n\nimport { Panel, View, PanelHeader, Epic, Tabbar, TabbarItem} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\n\nimport Home from './panels/Home';\nimport Info from './panels/Info';\n\nimport Icon28User from '@vkontakte/icons/dist/28/user';\nimport Icon28Market from '@vkontakte/icons/dist/24/market';\nimport Icon28Messages from '@vkontakte/icons/dist/28/messages';\nimport Icon28Favorite from '@vkontakte/icons/dist/28/favorite';\nimport Icon28More from '@vkontakte/icons/dist/28/more';\n\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            money: [],\n            items: [],\n            achievements: [],\n        \tactivePanel: 'home',\n            fetchedUser: null,\n            popout: null,\n            activeStory: 'user'\n        }\n\n        this.onStoryChange = this.onStoryChange.bind(this);\n    }\n\n    // Эти параметры нужны для подписи AJAX-запросов\n    signParams() {\n        var sign_params = [];\n        var url_params = window.location.href.split('#')[0].split('?')[1].split('&').map((n) => n.split('='));\n        url_params.forEach((n) => {\n            if(n[0].substr(0,3) == 'vk_' || n[0] == 'sign') {\n                sign_params.push(n[0] + '=' + n[1]);\n            }\n        });\n\n        // # хеш-параметры забираем все, что есть\n        var url_params = window.location.href.split('#')[1].split('&').map((n) => n.split('='));\n        url_params.forEach((n) => {\n                sign_params.push(n[0] + '=' + n[1]);\n        });\n\n        return sign_params.join('&');\n    }\n\n    onStoryChange (e) {\n        this.setState({ activeStory: e.currentTarget.dataset.story })\n    }\n\n    loadData(type) {\n        const requestAddress = 'http://activeusers.ru/app_api.php';\n        fetch(requestAddress).then(results => { return results.json() }).then(data => {\n            let newState = {};\n            newState[type] = data;\n            this.setState(newState);\n        }).catch(() => {\n            alert('Ошибка!');\n        });\n    }\n\n    componentDidMount () {\n        connect.subscribe((e) => {\n            switch (e.detail.type) {\n                case 'VKWebAppGetUserInfoResult':\n                    this.setState({ fetchedUser: e.detail.data });\n                    break;\n                case 'VKWebAppAccessTokenReceived':\n                    this.setState({ authToken : e.detail.data.access_token });\n                    this.getItems()\n                    break;\n                default:\n                    console.log(e.detail.type);\n            }\n        });\n        connect.send('VKWebAppGetUserInfo', {});\n        //connect.send(\"VKWebAppGetAuthToken\", {\"app_id\": 6906999, \"scope\": \"market\"});\n        //connect.send(\"VKWebAppGetUserInfo\", {}).then(e => this.setState({fetchedUser: e.data}))\n    }\n\n    go = e => {\n    \tthis.setState({activePanel: e.currentTarget.dataset.to})\n    }\n\n    /*\n    render() {\n        return (\n            <View popout={this.state.popout} activePanel={this.state.activePanel}>\n    \t\t\t<Home id=\"home\" go={this.go} appState={this.state} fetchedUser={this.state.fetchedUser}/>\n    \t\t\t<Info id=\"info\" go={this.go}/>\n\t\t\t</View>\n        )\n    }\n    */\n\n    render () {\n        return (\n            <Epic activeStory={this.state.activeStory} tabbar={\n                <Tabbar>\n                  <TabbarItem\n                    onClick={this.onStoryChange}\n                    selected={this.state.activeStory === 'user'}\n                    data-story=\"user\"\n                    text=\"Профиль\"\n                  ><Icon28User /></TabbarItem>\n                  <TabbarItem\n                    onClick={this.onStoryChange}\n                    selected={this.state.activeStory === 'shop'}\n                    data-story=\"shop\"\n                    text=\"Каталог\"\n                  ><Icon28Market /></TabbarItem>\n                  <TabbarItem\n                    onClick={this.onStoryChange}\n                    selected={this.state.activeStory === 'messages'}\n                    data-story=\"messages\"\n                    /* label=\"12\" */\n                    text=\"Рассылка\"\n                  ><Icon28Messages /></TabbarItem>\n                  <TabbarItem\n                    onClick={this.onStoryChange}\n                    selected={this.state.activeStory === 'rates'}\n                    data-story=\"rates\"\n                    text=\"Рейтинги\"\n                  ><Icon28Favorite /></TabbarItem>\n                  <TabbarItem\n                    onClick={this.onStoryChange}\n                    selected={this.state.activeStory === 'more'}\n                    data-story=\"more\"\n                    text=\"Ещё\"\n                  ><Icon28More /></TabbarItem>\n                </Tabbar>\n              }>\n\n                <View id=\"user\" activePanel=\"home\">\n                    <Home id=\"home\" t={this} go={this.go} appState={this.state} fetchedUser={this.state.fetchedUser}/>\n                    <Info id=\"info\" go={this.go}/>\n                </View>\n                <View id=\"discover\" activePanel=\"discover\">\n                    <Panel id=\"discover\">\n                        <PanelHeader>Discover</PanelHeader>\n                    </Panel>\n                </View>\n                <View id=\"messages\" activePanel=\"messages\">\n                    <Panel id=\"messages\">\n                        <PanelHeader>Messages</PanelHeader>\n                    </Panel>\n                </View>\n                <View id=\"notifications\" activePanel=\"notifications\">\n                    <Panel id=\"notifications\">\n                        <PanelHeader>Notifications</PanelHeader>\n                    </Panel>\n                </View>\n                <View id=\"more\" activePanel=\"more\">\n                    <Panel id=\"more\">\n                        <PanelHeader>More</PanelHeader>\n                    </Panel>\n                </View>\n            </Epic>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n\nconnect.send('VKWebAppInit', {});\n//connect.subscribe((e) => console.log(e));\n\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}